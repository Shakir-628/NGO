@model IEnumerable<NGO_Project.AidRequest>

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Material Aid Requests</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* ... (Your CSS styles from the previous response) ... */
    </style>
</head>
<body>
    <div class="header">
        <div>
            <h2>Welcome, @(Session["FullName"] ?? "Donor")</h2>
            <button class="donor-portal">Donor Portal</button>
        </div>

        <form action="@Url.Action("Logout", "Users")" method="post" style="display:inline;">
            @Html.AntiForgeryToken()
            <button type="submit" class="logout-btn">Logout</button>
        </form>

    </div>
    <div class="container">
        <div class="title">Material Aid Requests</div>
        <div class="subtitle">Help NGOs by donating needed items directly</div>
        <div class="search-bar">
            <input type="text" placeholder="Search items needed..." disabled>
            <button title="Filter" disabled><span>&#128269;</span></button>
        </div>
        <div class="cards">
            @if (!Model.Any())
            {
                <div style="text-align: center; width: 100%; color: #6b7280; padding: 40px;">No active aid requests available at the moment. Please check back later!</div>
            }
            else
            {
                @foreach (var request in Model)
                {
                    <div class="card">
                        @{
                            string priorityClass = "";
                            if (request.UrgencyLevel != null)
                            {
                                priorityClass = request.UrgencyLevel.Replace(" ", "").ToLower();
                            }
                        }
                        <span class="priority @priorityClass">@request.UrgencyLevel.ToUpper()</span>
                        <span class="date">@request.PostDate.ToString("M/d/yyyy")</span>
                        <h3>@request.RequestTitle</h3>
                        @* The NGO name is derived from the FirstName and LastName of the User table. *@
                        <a class="org-link" href="#">@(request.User?.FirstName + " " + request.User?.LastName)</a>
                        <div class="desc">
                            @request.Description
                        </div>
                        <div class="location">&#128205; @request.Location</div>
                        <div class="category">@request.Category</div>
                        <div class="items-needed">Items Needed:</div>
                        <div class="item-tags">
                            @* The provided schema for dbo.AidRequests does not contain an 'Items Needed' column.
                                This data is likely in a separate, related table (e.g., RequestedItems).
                                You will need to query and loop through that table here once it is available.
                                For now, this is a placeholder.
                            *@
                            <span class="item-tag">Items not specified</span>
                        </div>
                        <button class="donate-btn">&#10084; Donate Items</button>
                    </div>
                }
            }
        </div>
    </div>
</body>
</html>